{"version":3,"sources":["webpack:///./src/views/page/PageBlocks.vue?7854","webpack:///./src/components/WindowHelp.vue?0a87","webpack:///./src/store/notes/doc.ts","webpack:///./src/components/Markdown.vue?d4a3","webpack:///./src/views/page/PageBlocks.vue","webpack:///./src/views/page/PageBlocks.vue?3c69","webpack:///./src/components/Markdown.vue","webpack:///./src/components/Markdown.vue?8dc6","webpack:///./src/components/WindowHelp.vue","webpack:///./src/components/WindowHelp.vue?35cf"],"names":["Lang","DocPageIndexKey","PAGE_INDEX_CTRL_F","name","value","introduce","lang","PAGE_INDEX_KEY_N","PAGE_INDEX_UP","PAGE_INDEX_RIGHT","PAGE_INDEX_DOWN","PAGE_INDEX_LEFT","PAGE_INDEX_CTRL_LEFT","PAGE_INDEX_CTRL_RIGHT","DocPageIndexHelper","intros","concat","map","item","hotkey","style","DocPageBlocksKey","PAGE_BLOCKS_KEY_N","PAGE_BLOCKS_UP","PAGE_BLOCKS_RIGHT","PAGE_BLOCKS_DOWN","PAGE_BLOCKS_LEFT","PAGE_BLOCKS_CTRL_LEFT","PAGE_BLOCKS_CTRL_RIGHT","DocPageBlocksHelper","DocMarkdownKey","MARKDOWN_UP","MARKDOWN_RIGHT","MARKDOWN_DOWN","MARKDOWN_LEFT","MARKDOWN_CTRL_Q","MARKDOWN_CTRL_E","MARKDOWN_CTRL_S","MARKDOWN_ESC","DocMarkdownHelper","class","contenteditable","changeTitle","updatePageTitleByBlur","page","title","blocks","length","isNeedHelp","showMarkdown","helpContent","key","openid","type","parse","onShowMarkdown","markdown","update","markdownHelp","isMarkdownNeedHelp","hotkeys","window","components","WindowHelp","Markdown","data","blockOpenid","delay","computed","this","find","mounted","init","addNew","showHelp","setScope","unmounted","unbind","methods","event","block","parent","addBlock","preventDefault","alert","e","target","innerHTML","debounceFun","changePage","updateNote","$route","params","$store","getters","getPage","getBlocks","v","handler","console","log","updatePage","cancel","val","needUpdate","hashs","setHash","hash","updateTime","push","reload","render","__scopeId","isShowRight","isShowLeft","id","onChangeAce","onChangeLeft","ref","html","tabindex","onChangeContent","Cover","props","Object","default","editor","code","isEditLeft","$refs","rightElement","a","edit","minLines","fontSize","tabSize","readOnly","highlightActiveLine","config","set","getSession","setMode","setUseWrapMode","setShowPrintMargin","on","setValue","clearSelection","onFinish","focus","onShowLeft","onShowRight","onOk","closeLeft","filter","text","getValue","newContent","$emit","showStyle","showName","showIntroduce","index"],"mappings":"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","file":"js/pageblock.b3ca0c77.js","sourcesContent":["export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PageBlocks.vue?vue&type=style&index=0&id=15ba6376&lang=scss&scoped=true\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PageBlocks.vue?vue&type=style&index=0&id=15ba6376&lang=scss&scoped=true\"","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WindowHelp.vue?vue&type=style&index=0&id=408a851a&lang=sass&scoped=true\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WindowHelp.vue?vue&type=style&index=0&id=408a851a&lang=sass&scoped=true\"","/*\r\n * @Author: xion\r\n * @Date: 2020-09-01 14:56:35\r\n * @LastEditors: xion\r\n * @LastEditTime: 2020-09-03 12:40:20\r\n * @FilePath: \\redding\\src\\store\\notes\\doc.ts\r\n * @Description: 真是太开心了\r\n */\r\nimport { getls, removels } from \"@/cache\";\r\n\r\nexport enum Lang {\r\n    ZH= \"zh_CN\",\r\n}\r\nexport const DocPageKey:{[key: string]: MyStorage} = {\r\n    PAGE_CTRL_R: {\r\n        name: \"PAGE_CTRL_R\",\r\n        value: \"ctrl+r\",\r\n        introduce: (lang) => {\r\n            switch(lang){\r\n                default: return \"刷新组件\"\r\n            }\r\n        }\r\n    },\r\n}\r\nexport const DocPageHelper: DocHelp = {\r\n    name: (lang=\"zh\") => {\r\n        switch(lang){\r\n            default: return \"所有\"\r\n        }\r\n        return \"all\"\r\n    },\r\n    introduce: (lang=\"zh\")=>{\r\n        const intros = [\"PAGE_CTRL_R\"]\r\n        return intros.map(item=>{\r\n            return {\r\n                name: item,\r\n                hotkey: getls(DocPageKey[item]),\r\n                introduce: DocPageKey[item].introduce(lang)\r\n            }\r\n        })\r\n    },\r\n    style:()=>{\r\n        //\r\n    }\r\n}\r\n// PageIndex\r\nexport const DocPageIndexKey:{[key: string]: MyStorage} = {\r\n    PAGE_INDEX_CTRL_F: {\r\n        name: \"PAGE_INDEX_CTRL_F\",\r\n        value: \"ctrl+f\",\r\n        introduce: (lang) => {\r\n            switch(lang){\r\n                default: return \"<a>搜索框显示</a>\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_KEY_N: {\r\n        name: \"PAGE_INDEX_KEY_N\",\r\n        value: \"n\",\r\n        introduce: (lang) => {\r\n            switch(lang){\r\n                default: return \"新建页面\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_UP: {\r\n        name: \"PAGE_INDEX_UP\",\r\n        value: \"up\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"上一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_RIGHT: {\r\n        name: \"PAGE_INDEX_RIGHT\",\r\n        value: \"right\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"右面一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_DOWN: {\r\n        name: \"PAGE_INDEX_DOWN\",\r\n        value: \"down\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"下面一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_LEFT: {\r\n        name: \"PAGE_INDEX_LEFT\",\r\n        value: \"left\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"左边一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_CTRL_LEFT: {\r\n        name: \"PAGE_INDEX_CTRL_LEFT\",\r\n        value: \"ctrl+left\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"返回\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_INDEX_CTRL_RIGHT: {\r\n        name: \"PAGE_INDEX_CTRL_RIGHT\",\r\n        value: \"ctrl+right\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"往前\"\r\n            }\r\n        }\r\n    },\r\n}\r\nexport const DocPageIndexHelper: DocHelp = {\r\n    name: (lang=\"zh\") => {\r\n        switch(lang){\r\n            default: return \"页面索引\"\r\n        }\r\n        return \"PageIndex\"\r\n    },\r\n    introduce: (lang=\"zh\")=>{\r\n        let intros = [\"PAGE_INDEX_CTRL_F\", \"PAGE_INDEX_UP\", \"PAGE_INDEX_RIGHT\", \"PAGE_INDEX_DOWN\", \"PAGE_INDEX_LEFT\"]\r\n        intros = intros.concat([\"PAGE_INDEX_CTRL_LEFT\", \"PAGE_INDEX_CTRL_RIGHT\"]);\r\n        return intros.map(item=>{\r\n            return {\r\n                name: item,\r\n                hotkey: getls(DocPageIndexKey[item]),\r\n                introduce: DocPageIndexKey[item].introduce(lang)\r\n            }\r\n        })\r\n    },\r\n    style:()=>{\r\n        //\r\n    }\r\n}\r\n// PageBlocks\r\nexport const DocPageBlocksKey:{[key: string]: MyStorage} = {\r\n    PAGE_BLOCKS_KEY_N: {\r\n        name: \"PAGE_BLOCKS_KEY_N\",\r\n        value: \"n\",\r\n        introduce: (lang) => {\r\n            switch(lang){\r\n                default: return \"新建块\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_BLOCKS_UP: {\r\n        name: \"PAGE_BLOCKS_UP\",\r\n        value: \"up\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"上一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_BLOCKS_RIGHT: {\r\n        name: \"PAGE_BLOCKS_RIGHT\",\r\n        value: \"right\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"右面一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_BLOCKS_DOWN: {\r\n        name: \"PAGE_BLOCKS_DOWN\",\r\n        value: \"down\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"下面一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_BLOCKS_LEFT: {\r\n        name: \"PAGE_BLOCKS_LEFT\",\r\n        value: \"left\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"左边一个选项\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_BLOCKS_CTRL_LEFT: {\r\n        name: \"PAGE_BLOCKS_CTRL_LEFT\",\r\n        value: \"ctrl+left\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"返回\"\r\n            }\r\n        }\r\n    },\r\n    PAGE_BLOCKS_CTRL_RIGHT: {\r\n        name: \"PAGE_BLOCKS_CTRL_RIGHT\",\r\n        value: \"ctrl+right\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"往前\"\r\n            }\r\n        }\r\n    },\r\n}\r\nexport const DocPageBlocksHelper: DocHelp = {\r\n    name: (lang=\"zh\") => {\r\n        switch(lang){\r\n            default: return \"页面块\"\r\n        }\r\n        return \"PageBlocks\"\r\n    },\r\n    introduce: (lang=\"zh\")=>{\r\n        let intros = [\"PAGE_BLOCKS_KEY_N\", \"PAGE_BLOCKS_UP\", \"PAGE_BLOCKS_RIGHT\", \"PAGE_BLOCKS_DOWN\", \"PAGE_BLOCKS_LEFT\"]\r\n        intros = intros.concat([\"PAGE_BLOCKS_CTRL_LEFT\", \"PAGE_BLOCKS_CTRL_RIGHT\"]);\r\n        return intros.map(item=>{\r\n            return {\r\n                name: item,\r\n                hotkey: getls(DocPageBlocksKey[item]),\r\n                introduce: DocPageBlocksKey[item].introduce(lang)\r\n            }\r\n        })\r\n    },\r\n    style:()=>{\r\n        //\r\n    }\r\n}\r\n// Markdown\r\nexport const DocMarkdownKey:{[key: string]: MyStorage} = {\r\n    MARKDOWN_UP: {\r\n        name: \"MARKDOWN_UP\",\r\n        value: \"up\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"向上\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_RIGHT: {\r\n        name: \"MARKDOWN_RIGHT\",\r\n        value: \"right\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"向右\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_DOWN: {\r\n        name: \"MARKDOWN_DOWN\",\r\n        value: \"down\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"向下\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_LEFT: {\r\n        name: \"MARKDOWN_LEFT\",\r\n        value: \"left\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"向左\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_CTRL_Q: {\r\n        name: \"MARKDOWN_CTRL_Q\",\r\n        value: \"ctrl+q\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"隐藏/显示左边markdown编辑\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_CTRL_E: {\r\n        name: \"MARKDOWN_CTRL_E\",\r\n        value: \"ctrl+e\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"隐藏/显示右边markdown预览\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_CTRL_S: {\r\n        name: \"MARKDOWN_CTRL_S\",\r\n        value: \"ctrl+s\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"保存退出\"\r\n            }\r\n        }\r\n    },\r\n    MARKDOWN_ESC: {\r\n        name: \"MARKDOWN_CTRL_ESC\",\r\n        value: \"esc\",\r\n        introduce: ( lang ) =>{\r\n            switch( lang ) {\r\n                default: return \"隐藏/显示左边markdown预览\"\r\n            }\r\n        }\r\n    },\r\n\r\n}\r\nexport const DocMarkdownHelper: DocHelp = {\r\n    name: (lang=\"zh\") => {\r\n        switch(lang){\r\n            default: return \"标记语言Markdown\"\r\n        }\r\n        return \"Markdown\"\r\n    },\r\n    introduce: (lang=\"zh\")=>{\r\n        let intros = [\"MARKDOWN_UP\", \"MARKDOWN_RIGHT\", \"MARKDOWN_DOWN\", \"MARKDOWN_LEFT\"]\r\n        intros = intros.concat([\"MARKDOWN_CTRL_Q\", \"MARKDOWN_CTRL_E\", \"MARKDOWN_ESC\"]);\r\n        intros = intros.concat([\"MARKDOWN_CTRL_S\" ]);\r\n        return intros.map(item=>{\r\n            return {\r\n                name: item,\r\n                hotkey: getls(DocMarkdownKey[item]),\r\n                introduce: DocMarkdownKey[item].introduce(lang)\r\n            }\r\n        })\r\n    },\r\n    style:()=>{\r\n        //\r\n    }\r\n}\r\n","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Markdown.vue?vue&type=style&index=0&lang=scss\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Markdown.vue?vue&type=style&index=0&lang=scss\"","<!--\r\n * @Author: xion\r\n * @Date: 2020-08-31 10:22:33\r\n * @LastEditors: xion\r\n * @LastEditTime: 2020-09-03 08:51:34\r\n * @FilePath: \\redding\\src\\views\\page\\PageBlocks.vue\r\n * @Description: 真是太开心了\r\n-->\r\n<template>\r\n    <div class=\"page-blocks padding-12\">\r\n        <div class=\"page-block-title no-outline\" contenteditable=\"true\" @input=\"changeTitle\" @blur=\"updatePageTitleByBlur\">\r\n            {{page.title}}\r\n        </div>\r\n        <div class=\"hr\" style=\"width:80%;\" v-if=\"blocks.length!==0\"/>\r\n        <WindowHelp v-if=\"(blocks.length==0||isNeedHelp)&&!showMarkdown\" :helpContent=\"DocPageBlocksHelper\" ><pre>帮助内容</pre></WindowHelp>\r\n        <div class=\"page-block-item\" v-for=\"item in blocks\" :key=\"item.openid\">\r\n            <template v-if=\"item.type===205\">\r\n                <div v-html=\"parse(item.value)\" @click=\"onShowMarkdown(item)\"></div>\r\n            </template>\r\n        </div>\r\n        <Markdown v-if=\"showMarkdown\" :markdown=\"markdown\" v-on:update=\"update\" v-on:markdown-help=\"markdownHelp\">\r\n            <WindowHelp v-if=\"isMarkdownNeedHelp\" :helpContent=\"DocMarkdownHelper\" ><pre>帮助内容</pre></WindowHelp>\r\n        </Markdown>\r\n        <div class=\"no-blocks margin-left-24\" v-if=\"blocks.length===0\">没有节点,按N添加Markdown</div> \r\n    </div>\r\n</template>\r\n<script>\r\nimport { magGetters, mapActions, mapMutations } from \"vuex\";\r\nimport { parseText, parseHtml } from \"@/utils\";\r\nimport WindowHelp from \"@/components/WindowHelp\";\r\nimport Markdown from \"@/components/Markdown\";\r\n// import store from \"@/store\";\r\nimport { Block,Page, BlockType } from \"@/models\";\r\n// import hotkeys from \"hotkeys-js\";\r\nimport { debounce } from \"@/utils\";\r\nimport { DocPageBlocksHelper, DocMarkdownHelper } from \"@/store/doc-key\";\r\nimport hotkeys from 'hotkeys-js';\r\nhotkeys = window.hotkeys;\r\nexport default {\r\n    name: \"PageBlocks\",\r\n    components: { WindowHelp, Markdown },\r\n    data(){\r\n        return {\r\n            blocks: [],\r\n            blockOpenid: \"\",\r\n            delay: \"\",\r\n            DocPageBlocksHelper,\r\n            DocMarkdownHelper,\r\n            isNeedHelp: true,\r\n            isMarkdownNeedHelp: true,\r\n            showMarkdown: false,\r\n            page: {},\r\n            title: \"\",\r\n        }\r\n    },\r\n    computed: {\r\n        markdown() {\r\n            return this.blocks.find(item=>item.openid===this.blockOpenid)\r\n        }\r\n    },\r\n    mounted(){\r\n        // console.log(this.$route.params.openid)\r\n        this.init();\r\n        hotkeys(\"n\",\"pageBlocks\",this.addNew);\r\n        hotkeys(\"ctrl+h\",\"pageBlocks\",this.showHelp);\r\n        hotkeys.setScope(\"pageBlocks\")\r\n    },\r\n    unmounted() {\r\n        hotkeys.unbind(\"n\",\"pageBlocks\",this.addNew);\r\n        hotkeys.unbind(\"ctrl+h\",\"pageBlocks\",this.showHelp);\r\n        hotkeys.setScope(\"all\")\r\n    },\r\n    methods: {\r\n        ...mapMutations([\"updateNote\"]),\r\n        ...mapActions([\"addBlock\", \"reload\"]),\r\n        addNew(event) {\r\n            if(this.page.openid) {\r\n                const block = new Block({parent: this.page.openid, type: BlockType.Markdown})\r\n                this.addBlock(block);\r\n                event.preventDefault();\r\n            }else{\r\n                alert(\"添加失败\")\r\n            }\r\n        },\r\n        changeTitle(e) {\r\n            // console.log(e.target.innerHTML)\r\n            const title = e.target.innerHTML;\r\n            this.title = title;\r\n            this.delay = this.debounceFun(title)\r\n        },\r\n        debounceFun: debounce(2000, false, function (title) {\r\n            const changePage = new Page(this.page)\r\n            changePage.update({title});\r\n            // console.log(changePage)\r\n            this.updateNote(changePage);\r\n            this.delay = \"\"\r\n        }),\r\n        init(){\r\n            const openid = this.$route.params.openid;\r\n            // this.blocks = this.getBlocks(openid);\r\n            this.page = this.$store.getters.getPage(openid);\r\n            this.blocks = this.$store.getters.getBlocks(openid);\r\n            // console.log(this.blocks,openid,parseText);\r\n            // console.log(parseText(this.blocks[0].value))\r\n        },\r\n        markdownHelp(){\r\n            this.isMarkdownNeedHelp = !this.isMarkdownNeedHelp;\r\n        },\r\n        onShowMarkdown(item){\r\n            this.blockOpenid = item.openid;\r\n            this.showMarkdown = true;\r\n        },\r\n        parse(v){\r\n            // console.log(\"v\", v);\r\n            if(v===\"\"||!v)return parseText(\"markdown内容为空\");\r\n            return parseText(v)\r\n        },\r\n        showHelp(event, handler){\r\n            this.isNeedHelp = !this.isNeedHelp;\r\n            console.log(\"event\", event, handler);\r\n            event.preventDefault();\r\n        },\r\n        updatePage(title) { \r\n            const changePage = new Page(this.page)\r\n            changePage.update({title});\r\n            this.updateNote(changePage);\r\n        },\r\n        updatePageTitleByBlur(){\r\n            if(this.delay)this.delay.cancel();\r\n            this.updatePage(this.title);\r\n        },\r\n        update(val){\r\n            // 从组件更新对应的blocks\r\n            let block;\r\n            let needUpdate = false;\r\n            const hashs = [];\r\n            this.blocks = this.blocks.map(item=>{\r\n                if(item.openid===val.openid) {\r\n                    block = new Block(item);\r\n                    block.value = val.value;\r\n                    block.setHash();\r\n                    needUpdate = block.hash !== item.hash;\r\n                    if(needUpdate){\r\n                        block.updateTime()\r\n                    }\r\n                    hashs.push(block.hash)\r\n                    return block;\r\n                };\r\n                hashs.push(item.hash)\r\n                return item;\r\n            })\r\n            if(needUpdate) {\r\n                // 更新 page的信息 暂时不管\r\n                // const page = this.page;\r\n                // page.setArrHash(hashs);\r\n                // this.updateNote(page);\r\n                this.updateNote(block);\r\n            }\r\n            \r\n            this.showMarkdown = false;\r\n            hotkeys.setScope(\"pageBlocks\")\r\n            // 因为热更新的问题\r\n            this.reload();\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.page-blocks {\r\n    width: 80%;\r\n    height: 100%;\r\n    margin: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    border-radius: 4px;\r\n    border: 1px solid #ebeef5;\r\n    box-sizing: border-box;\r\n    background-color: #fff;\r\n    transition: 0.3s;\r\n}\r\n</style>","import { render } from \"./PageBlocks.vue?vue&type=template&id=15ba6376&scoped=true\"\nimport script from \"./PageBlocks.vue?vue&type=script&lang=js\"\nexport * from \"./PageBlocks.vue?vue&type=script&lang=js\"\n\nimport \"./PageBlocks.vue?vue&type=style&index=0&id=15ba6376&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-15ba6376\"\n\nexport default script","<template>\r\n    <Cover>\r\n      <div class=\"markdown-edit\" :style=\"{pointerEvents:!isShowRight&&!isShowLeft?'none':'auto'}\">\r\n          <slot></slot>\r\n        <div class=\"markdown-edit-content\">\r\n          <transition name=\"reslide-fade\">\r\n            <div class=\"content-left\" v-show=\"isShowLeft\">\r\n                <div id=\"editor\"   @change=\"onChangeAce\" @click=\"onChangeLeft(true)\"></div>\r\n            </div>\r\n          </transition>\r\n           <transition name=\"slide-fade\" >\r\n                <div class=\"content-right\" ref=\"rightElement\" v-if=\"isShowRight\" :style=\"{'width': !isShowLeft?'100%':'45%'}\">\r\n                    <div \r\n                        class=\"markdown-preview\" \r\n                        ref=\"markdown-preview\"  \r\n                        v-html=\"html\"\r\n                        tabindex=\"1\"\r\n                        :contenteditable=\"true\"\r\n                        @input=\"onChangeContent\"\r\n                        @click=\"onChangeLeft(false)\"\r\n                    ></div>\r\n                </div> \r\n          </transition>\r\n        </div>\r\n      </div>\r\n    </Cover>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport ace, {Ace, edit} from \"ace-builds\";\r\nimport Cover from \"@/components/Cover\";\r\nimport Icon from \"@/components/Icon\";\r\nimport { parseText, parseHtml, debounce } from \"@/utils\";\r\nimport hotkeys from 'hotkeys-js';\r\n\r\nexport default {\r\n    name: \"Markdown\",\r\n    components: {\r\n        Cover\r\n    },\r\n    props: {\r\n        markdown: {\r\n            type: Object,\r\n            default: ()=>{\r\n                return {value: \"##\"};\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            isShowRight: true,\r\n            isShowLeft: true,\r\n            editor: \"\", \r\n            code: \"code\",\r\n            html: \"\",\r\n            isEditLeft: true,\r\n        }\r\n    },\r\n    mounted() {\r\n        const element = this.$refs.rightElement;\r\n        const editor = ace.edit(\"editor\", {\r\n            // maxLines: 20, // 最大行数，超过会自动出现滚动条\r\n            minLines: 10, // 最小行数，还未到最大行数时，编辑器会自动伸缩大小\r\n            fontSize: 12, // 编辑器内字体大小\r\n            // theme: this.themePath, // 默认设置的主题\r\n            // mode: this.modePath, // 默认设置的语言模式\r\n            tabSize: 4, // 制表符设置为 4 个空格大小\r\n            readOnly: false,\r\n            highlightActiveLine: false,\r\n            value: this.code\r\n        });\r\n        ace.config.set(\r\n            \"basePath\", \r\n            \"https://cdn.jsdelivr.net/npm/ace-builds@1.4.3/src-noconflict/\"\r\n        )\r\n        // editor.setTheme(\"ace/theme/monokai\"); \r\n        editor.getSession().setMode(\"ace/mode/markdown\");\r\n        editor.getSession().setUseWrapMode(true); // 自动换行\r\n        editor.setShowPrintMargin(false); \r\n        this.editor = editor;\r\n        editor.getSession().on(\"change\", this.onChangeAce);\r\n        const value = this.markdown.value||\"code\";\r\n        editor.setValue(value);\r\n        editor.clearSelection()\r\n        editor.on(\"blur\", this.onFinish);   \r\n        editor.focus()\r\n        \r\n        hotkeys(\"ctrl+q,ctrl+l\", \"markdown\",this.onShowLeft);\r\n        hotkeys(\"ctrl+e\", \"markdown\", this.onShowRight);\r\n        hotkeys(\"ctrl+enter,ctrl+s\",\"markdown\", this.onOk);\r\n        hotkeys(\"esc\", \"markdown\", this.closeLeft)\r\n        hotkeys(\"ctrl+h\",\"markdown\",this.showHelp);\r\n        hotkeys.setScope(\"markdown\");\r\n        hotkeys.filter = ()=>true;\r\n        // document.getElementsByTagName(\"textarea\")[0].focus();\r\n        // document.getElementsByClassName(\"markdown-preview\")[0].focus()\r\n        // console.log(\"focuse\", document.activeElement)\r\n    },\r\n    unmounted(){\r\n        hotkeys.unbind(\"ctrl+q,ctrl+l\",\"markdown\",this.onShowLeft);\r\n        hotkeys.unbind(\"ctrl+e\", \"markdown\", this.onShowRight);\r\n        hotkeys.unbind(\"ctrl+enter,ctrl+s\", \"markdown\", this.onOk);\r\n        hotkeys.unbind(\"esc\", \"markdown\", this.closeLeft)\r\n        hotkeys.unbind(\"ctrl+h\",\"markdown\",this.showHelp);\r\n        hotkeys.setScope(\"all\")\r\n    },\r\n    methods: {\r\n        onShowLeft(e) {\r\n            this.isShowLeft = !this.isShowLeft;\r\n            console.log(\"key\", e)\r\n            e.preventDefault()\r\n        },\r\n        onShowRight(e) {\r\n            this.isShowRight = !this.isShowRight;\r\n            e.preventDefault()\r\n        },\r\n        onOk(e) {\r\n            this.onShowMarkdown();\r\n            e.preventDefault();\r\n        },\r\n        onChangeAce() { \r\n            if( this.isEditLeft ) {\r\n                this.text = this.editor.getValue();\r\n                this.html = parseText(this.text );\r\n            }\r\n        },\r\n        onChangeContent(e) {          \r\n            const html = e.target.innerHTML;\r\n            const text = parseHtml(html);\r\n            this.text = text;\r\n            this.editor.setValue(text);\r\n            this.editor.clearSelection();\r\n        },\r\n        onChangeLeft(val) {\r\n            this.isEditLeft = val;\r\n        },\r\n        onFinish( ) {\r\n            this.isEditLeft = false;\r\n        },\r\n        onShowMarkdown() {\r\n            const newContent = this.markdown;\r\n            newContent.value = this.text;\r\n            this.$emit(\"update\", newContent);\r\n        },\r\n        showHelp(event, handler){\r\n            // console.log(\"event markdown\", event, handler)\r\n            this.$emit(\"markdown-help\");\r\n            event.preventDefault();\r\n        },\r\n        closeLeft(e){\r\n            if(!this.isShowLeft&&!this.isShowRight){\r\n                this.onShowMarkdown()\r\n            }else if( this.isShowLeft && this.isShowRight){\r\n                this.isShowLeft = !this.isShowLeft;\r\n            }else if( this.isShowLeft && !this.isShowRight){\r\n                this.isShowLeft = !this.isShowLeft;\r\n            }else if( !this.isShowLeft && this.isShowRight){\r\n                this.isShowLeft = !this.isShowLeft;\r\n            }\r\n \r\n            e.preventDefault();\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n// markdown-edit\r\n.markdown-edit {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  flex-direction: column;\r\n  .markdown-edit-content {\r\n    flex-grow: 1;\r\n    display: flex;\r\n    .content-left {\r\n      flex-grow: 1;\r\n      display: flex;\r\n      #editor {\r\n          width: 100%;\r\n          height: 100%;\r\n      }\r\n    }\r\n    .content-right {\r\n        width: 45%;\r\n        height: 100%;\r\n        display: flex;\r\n        .markdown-preview {\r\n            flex-grow: 1;\r\n        }\r\n    }\r\n    /* 可以设置不同的进入和离开动画 */\r\n    /* 设置持续时间和动画函数 */\r\n    .slide-fade-enter-active {\r\n        transform: translate(400px, 0);\r\n        opacity: 0;\r\n        transition: all 2.8s ease;\r\n    }\r\n    .slide-fade-leave-active {\r\n        transition: all 1.8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\r\n    }\r\n    .slide-fade-enter-to {\r\n        transform: translate(0, 0);\r\n        opacity: 1;\r\n    }\r\n    .slide-fade-leave-to {\r\n        transform: translate(400px, 0);\r\n        opacity: 0;\r\n    }\r\n\r\n   .reslide-fade-leave-active {\r\n        opacity: 1;\r\n        transform: translate(400, 0);\r\n        transition: all 3.8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\r\n    }\r\n    .reslide-fade-leave-to {\r\n        transform: translate(0, 0);\r\n        opacity: 0;\r\n    }\r\n    .reslide-fade-enter-active {\r\n        transform: translate(-400px, -100);\r\n        opacity: 0.5;\r\n        transition: all 4.8s ease;\r\n        z-index: 10;\r\n    }\r\n    .reslide-fade-enter-to {\r\n        transform: translate(100, 0);\r\n        opacity: 1;\r\n    }\r\n \r\n    @media (max-width: 1024px) {\r\n        .content-right {\r\n            display: none;\r\n        }\r\n    }\r\n  }\r\n}\r\n// markdown-edit-style\r\n.markdown-edit {\r\n    .content-left {\r\n        background-color: grey;\r\n        textarea::selections {    background-color: red;    color: #fff;}\r\n    }\r\n    .content-right {\r\n        background-color: #fcfaf2;\r\n        .markdown-preview {\r\n            text-align: left;\r\n            // margin: 2rem;\r\n            outline: none;\r\n            padding: 0 2rem 0 1rem;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n</style>\r\n","import { render } from \"./Markdown.vue?vue&type=template&id=07d811f4\"\nimport script from \"./Markdown.vue?vue&type=script&lang=js\"\nexport * from \"./Markdown.vue?vue&type=script&lang=js\"\n\nimport \"./Markdown.vue?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script","<!--\r\n * @Author: xion\r\n * @Date: 2020-08-31 16:46:15\r\n * @LastEditors: xion\r\n * @LastEditTime: 2020-09-01 18:04:27\r\n * @FilePath: \\redding\\src\\components\\WindowHelp.vue\r\n * @Description: 真是太开心了\r\n-->\r\n<template>\r\n    <div class=\"show-help el-card padding-8\" :style=\"showStyle\">帮助:{{showName}}<small>ctrl+h隐藏帮助</small>\r\n        <div>\r\n            <slot></slot>\r\n            <table class=\"el-table\">\r\n                <tr>\r\n                    <th>命名</th>\r\n                    <th>按键</th>\r\n                    <th>介绍</th>\r\n                </tr>\r\n                <tr v-for=\"(item,index) in showIntroduce\" :key=\"index+showName\">\r\n                    <td>{{ item.name }}</td>\r\n                    <td>{{ item.hotkey }}</td>\r\n                    <td><div v-html=\"item.introduce\"></div></td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { getFormatStyle } from '@/utils';\r\nexport default {\r\n    name: \"WindowHelp\",\r\n    props: {\r\n        helpContent: {\r\n            type: Object,\r\n            default: () => {\r\n                return {\r\n                    name: ()=>\"帮助\",\r\n                    introduce: ()=>[],\r\n                    style: ()=>\"\"\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        showIntroduce(){\r\n            return this.helpContent.introduce();\r\n        },\r\n        showName() {\r\n            return this.helpContent.name();\r\n        },\r\n        showStyle() {\r\n            return getFormatStyle(this.helpContent.style());\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"sass\" scoped>\r\n\r\n</style>","import { render } from \"./WindowHelp.vue?vue&type=template&id=408a851a&scoped=true\"\nimport script from \"./WindowHelp.vue?vue&type=script&lang=js\"\nexport * from \"./WindowHelp.vue?vue&type=script&lang=js\"\n\nimport \"./WindowHelp.vue?vue&type=style&index=0&id=408a851a&lang=sass&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-408a851a\"\n\nexport default script"],"sourceRoot":""}