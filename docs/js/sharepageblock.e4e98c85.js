(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sharepageblock"],{"27d0":function(e,t,n){},"494a":function(e,t,n){"use strict";n("e65e")},7235:function(e,t,n){},"8d13":function(e,t,n){"use strict";n("27d0")},"91c6":function(e,t,n){"use strict";n("7235")},e2c6:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c=Object(o["withScopeId"])("data-v-31a15736");Object(o["pushScopeId"])("data-v-31a15736");var i={class:"page-blocks card padding-12"},r={class:"page-block-title no-outline",contenteditable:"true"},a={key:0,class:"hr",style:{width:"80%"}},s=Object(o["createVNode"])("pre",null,"帮助内容",-1),l={key:2,class:"no-blocks margin-left-24"};Object(o["popScopeId"])();var d=c((function(e,t){var n=Object(o["resolveComponent"])("WindowHelp"),d=Object(o["resolveComponent"])("Markdown");return Object(o["openBlock"])(),Object(o["createBlock"])("div",i,[Object(o["createVNode"])("div",r,Object(o["toDisplayString"])(e.page.title),1),0!==e.blocks.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",a)):Object(o["createCommentVNode"])("",!0),0==e.blocks.length||e.isNeedHelp?Object(o["createVNode"])(n,{key:1},{default:c((function(){return[s]})),_:1}):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.blocks,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"page-block-item",key:t.openid},[205===t.type?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])("div",{innerHTML:e.parse(t.value)},null,8,["innerHTML"]),e.showMarkdown?Object(o["createVNode"])(d,{key:0,markdown:t,onUpdate:e.update},null,8,["markdown","onUpdate"]):Object(o["createCommentVNode"])("",!0)],64)):Object(o["createCommentVNode"])("",!0)])})),128)),0===e.blocks.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",l,"没有节点,按N添加Markdown")):Object(o["createCommentVNode"])("",!0)])})),h=(n("d81d"),n("d257")),u=n("f138"),b=n("e6e0"),f={name:"PageBlock",components:{WindowHelp:u["a"],Markdown:b["a"]},data:function(){return{blocks:[],page:{},isNeedHelp:!1,showMarkdown:!1}},computed:{},mounted:function(){this.init()},methods:{init:function(){var e=this.$route.params.openid;this.page=this.$store.getters.getPage(e),this.blocks=this.$store.getters.getBlocks(e)},parse:function(e){return Object(h["k"])(e)},update:function(e){this.blocks=this.blocks.map((function(t){return t.openid===e.openid?e:t})),this.showMarkdown=!1}}};n("91c6");f.render=d,f.__scopeId="data-v-31a15736";t["default"]=f},e65e:function(e,t,n){},e6e0:function(e,t,n){"use strict";var o=n("7a23"),c={class:"markdown-edit-content"},i={class:"content-left"};function r(e,t){var n=Object(o["resolveComponent"])("Cover");return Object(o["openBlock"])(),Object(o["createBlock"])(n,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",{class:"markdown-edit",style:{pointerEvents:e.isShowRight||e.isShowLeft?"auto":"none"}},[Object(o["renderSlot"])(e.$slots,"default"),Object(o["createVNode"])("div",c,[Object(o["createVNode"])(o["Transition"],{name:"reslide-fade"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",i,[Object(o["createVNode"])("div",{id:"editor",onChange:t[1]||(t[1]=function(){return e.onChangeAce.apply(e,arguments)}),onClick:t[2]||(t[2]=function(t){return e.onChangeLeft(!0)})},null,32)],512),[[o["vShow"],e.isShowLeft]])]})),_:1}),Object(o["createVNode"])(o["Transition"],{name:"slide-fade"},{default:Object(o["withCtx"])((function(){return[e.isShowRight?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,class:"content-right",ref:"rightElement",style:{width:e.isShowLeft?"45%":"100%"}},[Object(o["createVNode"])("div",{class:"markdown-preview",ref:"markdown-preview",innerHTML:e.html,tabindex:"1",contenteditable:!0,onInput:t[3]||(t[3]=function(){return e.onChangeContent.apply(e,arguments)}),onClick:t[4]||(t[4]=function(t){return e.onChangeLeft(!1)})},null,40,["innerHTML"])],4)):Object(o["createCommentVNode"])("",!0)]})),_:1})])],4)]})),_:3})}n("4de4");var a=n("6d4f"),s=n.n(a),l=n("3020"),d=(n("cdae"),n("d257")),h=n("9b6a"),u={name:"Markdown",components:{Cover:l["a"]},props:{markdown:{type:Object,default:function(){return{value:"##"}}}},data:function(){return{isShowRight:!0,isShowLeft:!0,editor:"",code:"code",html:"",isEditLeft:!0}},mounted:function(){this.$refs.rightElement;var e=s.a.edit("editor",{minLines:10,fontSize:12,tabSize:4,readOnly:!1,highlightActiveLine:!1,value:this.code});s.a.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@1.4.3/src-noconflict/"),e.getSession().setMode("ace/mode/markdown"),e.getSession().setUseWrapMode(!0),e.setShowPrintMargin(!1),this.editor=e,e.getSession().on("change",this.onChangeAce);var t=this.markdown.value||"code";e.setValue(t),e.clearSelection(),e.on("blur",this.onFinish),e.focus(),Object(h["a"])("ctrl+q,ctrl+l","markdown",this.onShowLeft),Object(h["a"])("ctrl+e","markdown",this.onShowRight),Object(h["a"])("ctrl+enter,ctrl+s","markdown",this.onOk),Object(h["a"])("esc","markdown",this.closeLeft),Object(h["a"])("ctrl+h","markdown",this.showHelp),h["a"].setScope("markdown"),h["a"].filter=function(){return!0}},unmounted:function(){h["a"].unbind("ctrl+q,ctrl+l","markdown",this.onShowLeft),h["a"].unbind("ctrl+e","markdown",this.onShowRight),h["a"].unbind("ctrl+enter,ctrl+s","markdown",this.onOk),h["a"].unbind("esc","markdown",this.closeLeft),h["a"].unbind("ctrl+h","markdown",this.showHelp),h["a"].setScope("all")},methods:{onShowLeft:function(e){this.isShowLeft=!this.isShowLeft,console.log("key",e),e.preventDefault()},onShowRight:function(e){this.isShowRight=!this.isShowRight,e.preventDefault()},onOk:function(e){this.onShowMarkdown(),e.preventDefault()},onChangeAce:function(){this.isEditLeft&&(this.text=this.editor.getValue(),this.html=Object(d["k"])(this.text))},onChangeContent:function(e){var t=e.target.innerHTML,n=Object(d["j"])(t);this.text=n,this.editor.setValue(n),this.editor.clearSelection()},onChangeLeft:function(e){this.isEditLeft=e},onFinish:function(){this.isEditLeft=!1},onShowMarkdown:function(){var e=this.markdown;e.value=this.text,this.$emit("update",e)},showHelp:function(e,t){this.$emit("markdown-help"),e.preventDefault()},closeLeft:function(e){this.isShowLeft||this.isShowRight?(this.isShowLeft&&this.isShowRight||this.isShowLeft&&!this.isShowRight||!this.isShowLeft&&this.isShowRight)&&(this.isShowLeft=!this.isShowLeft):this.onShowMarkdown(),e.preventDefault()}}};n("8d13");u.render=r;t["a"]=u},f138:function(e,t,n){"use strict";n("b0c0");var o=n("7a23"),c=Object(o["withScopeId"])("data-v-408a851a");Object(o["pushScopeId"])("data-v-408a851a");var i=Object(o["createVNode"])("small",null,"ctrl+h隐藏帮助",-1),r={class:"el-table"},a=Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",null,"命名"),Object(o["createVNode"])("th",null,"按键"),Object(o["createVNode"])("th",null,"介绍")],-1);Object(o["popScopeId"])();var s=c((function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"show-help el-card padding-8",style:e.showStyle},[Object(o["createTextVNode"])("帮助:"+Object(o["toDisplayString"])(e.showName),1),i,Object(o["createVNode"])("div",null,[Object(o["renderSlot"])(e.$slots,"default"),Object(o["createVNode"])("table",r,[a,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.showIntroduce,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:n+e.showName},[Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.name),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.hotkey),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",{innerHTML:t.introduce},null,8,["innerHTML"])])])})),128))])])],4)})),l=n("d257"),d={name:"WindowHelp",props:{helpContent:{type:Object,default:function(){return{name:function(){return"帮助"},introduce:function(){return[]},style:function(){return""}}}}},computed:{showIntroduce:function(){return this.helpContent.introduce()},showName:function(){return this.helpContent.name()},showStyle:function(){return Object(l["d"])(this.helpContent.style())}}};n("494a");d.render=s,d.__scopeId="data-v-408a851a";t["a"]=d}}]);
//# sourceMappingURL=sharepageblock.e4e98c85.js.map